!function(e){"use strict";var t={};function measurePerf(e){window.performance&&window.performance.measure&&!t.hasOwnProperty(e)&&(window.performance.measure(e),t[e]=!0)}function onUCReady(e){var t=e.lang;window.usercentrics&&"function"==typeof window.usercentrics.updateLanguage&&window.usercentrics.updateLanguage(t),measurePerf("consent-ui-ready")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))}function getCookie(e){var t=(document.cookie||"").match(";?\\s*"+e+"=([^;]*)");return t&&t[1]}var n,a="1.0.0+3e118cd4";!function(e){e.LOAD_USERCENTRICS_BANNER="uc",e.RECEIVE_CONSENT_FROM_APP="app-external",e.CONSENT_MANAGEMENT_OFF="off"}(n||(n={}));function canLog(){return!!getCookie("uc-debug")||!!window.zconsent_debug_on}var o=function log(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];canLog()&&(e=console.log).call.apply(e,__spreadArray([console],__read(t),!1))},r=function error(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];canLog()&&(e=console.error).call.apply(e,__spreadArray(__spreadArray([console],__read(t),!1),["script version "+a],!1))};function getHash(e){var t=JSON.stringify(e),n=5381,a=0;for(a=0;a<t.length;a++){n=(n<<5)+n+t.charCodeAt(a)}var o=0xffffffffff&n;return(o<0?"0":"1")+Math.abs(o).toString(16)}function updateLocalRetryInfo(e){void 0===e&&(e={});try{window.localStorage.setItem("zConsentRetries",JSON.stringify(e)),o("Updated retry info",e)}catch(e){r(e)}}function checkIfStale(e){var t=e.data,n=e.onStale,a=void 0===n?function(){}:n,s=e.onUpToDate,i=void 0===s?function(){}:s,c=__read(function readLocalSettings(){try{var e=JSON.parse(window.localStorage.getItem("zConsentSettings")||"{}")||{};return[e.hash||"hash-error",e.timestamp||0]}catch(e){return r(e),["hash-error",0]}}(),2),u=c[0],l=c[1],d=getHash(t);(o("Comparing data hash",u,d),u===d)?(new Date).getTime()-l>3e5?a():i():a()}function getSafeFetch(e){var t=void 0===e?{}:e,n=t.cookieName,a=t.headerName;function fetchPolyfill(e,t){return void 0===t&&(t={}),new Promise((function(n,a){var o=new XMLHttpRequest;if(o.open(t.method||"GET",e),void 0!==t.headers){var r=t.headers;Object.keys(r).forEach((function(e){o.setRequestHeader(e,r[e])}))}o.onload=function(){n({status:o.status,statusText:o.statusText,text:function text(){return Promise.resolve(o.responseText)},json:function json(){return new Promise((function(e,t){try{e(JSON.parse(o.responseText))}catch(e){t(e)}}))}})},o.onerror=function(e){return a(e)},o.send(t.body)}))}function safeFetch(e,t){var n,a=Object.assign({},t);"credentials"in a||(a.credentials="same-origin"),"same-origin"===a.credentials&&(n=void 0===safeFetch.cookieName?"":getCookie(safeFetch.cookieName)||"",a.headers=a.headers||{},void 0!==safeFetch.headerName&&(a.headers[safeFetch.headerName]=n));var o=[].slice.call(arguments);return o[1]=a,(window.fetch||fetchPolyfill).apply(void 0,o)}return safeFetch.cookieName=n,safeFetch.headerName=a,safeFetch}var s;function saveConsentToBE(e){var t=e.data,n=e.cookieName,a=e.headerName,i=e.retryCount,c=void 0===i?0:i,u=e.timeout,l=void 0===u?0:u;function doRequest(){return o("Consent data to be saved",t),getSafeFetch({cookieName:n,headerName:a})("/api/consents",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return function is2xx(e){return 2===Math.floor(Number(e)/100)}(e.status)?e.text():Promise.reject(e)})).then((function(e){!function updateLocalSettings(e){try{var t=(new Date).getTime(),n=getHash(e),a={hash:n,timestamp:t};window.localStorage.setItem("zConsentSettings",JSON.stringify(a)),o("Updated consent data hash",n,t)}catch(e){r(e)}}(t),updateLocalRetryInfo(),measurePerf("consent-saved"),o(e)}),(function(e){if(void 0===e&&(e={statusText:"Non-HTTP error"}),r("Error saving consent. HTTP Status: "+e.status+", StatusText: "+e.statusText+", attempt: "+c),c++,function is5xx(e){return 5===Math.floor(Number(e)/100)}(e.status)||void 0===e.status){var o=function getRetryDelay(e){return e<1?0:Math.floor(Math.random()*Math.min(3e5,5e3*Math.pow(2,e-1)))}(c);return saveConsentToBE({data:t,cookieName:n,headerName:a,retryCount:c,timeout:o})}return updateLocalRetryInfo(),Promise.reject(e)}))}return window.clearTimeout(s),c>0&&(o("Scheduling retry #"+c+" in "+l+" msec..."),updateLocalRetryInfo({nextAt:l+(new Date).getTime(),retryCount:c})),0===l?doRequest():new Promise((function(e){s=window.setTimeout((function(){return e(doRequest())}),l)}))}function getTrack(e){return window[e]=window[e]||[],function track(t){void 0!==window[e]&&"function"==typeof window[e].push?window[e].push(t):r("window['"+e+"'].push is not a function")}}var i=function isBannerVisible(e){return function isBannerVisibleTimer(e,t){if(t())o("isBannerVisibleTimer stopped externally");else try{document.querySelectorAll(".z-uc-head").length>0?e():window.setTimeout(isBannerVisibleTimer,500,e,t)}catch(e){r(e)}}(e.onVisible,e.shouldStop)},c=function(){function BannerButtonHandler(){}return BannerButtonHandler.prototype.showBannerButton=function(){var e=document.getElementById("usercentrics-button");e&&e.classList.add("display-deny-all-link")},BannerButtonHandler}();function getAppConsents(e){var t=getSafeFetch();try{return Promise.race([t(e,{credentials:"omit"}),new Promise((function(e,t){window.setTimeout((function(){t(new Error("Fetching consents from the app timed out"))}),2e3)}))])}catch(e){return Promise.reject(e||new Error("Fetching consents from the app failed"))}}function triggerGTMEvents(e,t){var n={usc_origin:"from server setting",event:"consents_initialized"};t.forEach((function(e){return n[e.name]=e.status}));var a=getTrack(e);o("Triggering event on the GTM bus:",n),a(n)}function publishConsentsForAPI(e){window["__webview-consent__"]=e}var u=document.location.hostname,l={"www.zalando.de":{fullName:"Deutsch"},"m.zalando.de":{fullName:"Deutsch"},"en.zalando.de":{fullName:"English"},"m-en.zalando.de":{fullName:"English"},"www.zalando.ch":{fullName:"Deutsch"},"m.zalando.ch":{fullName:"Deutsch"},"fr.zalando.ch":{fullName:"Français"},"m-fr.zalando.ch":{fullName:"Français"},"it.zalando.ch":{fullName:"Italiano"},"m-it.zalando.ch":{fullName:"Italiano"},"www.zalando.be":{fullName:"Nederlands"},"m.zalando.be":{fullName:"Nederlands"},"fr.zalando.be":{fullName:"Français"},"m-fr.zalando.be":{fullName:"Français"}},d=document.querySelector(".z-navicat-header_flyin");function checkIfShouldShow(){return!!d}function createUcLangSelector(e){var t=l[u].fullName,n=function createGlobe(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.setAttribute("viewBox","0 0 24 24"),"newIcon"===e){var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M24 12a12 12 0 10-12 12c6.62 0 12-5.38 12-12zm-1.5-.02a33.5 33.5 0 00-3.78-.9c-.15-3.65-1.17-6.78-2.71-8.78a10.51 10.51 0 016.49 9.68zM11.25 1.63v8.89c-1.5 0-2.98.09-4.46.3.28-4.67 2.15-8.5 4.46-9.2zm0 10.38v10.36c-2.45-.73-4.41-5-4.5-10.05 1.5-.21 3-.3 4.5-.3zm1.5 10.36V12.01c1.5 0 3 .1 4.5.31-.09 5.04-2.05 9.32-4.5 10.05zm0-11.85v-8.9c2.31.7 4.18 4.53 4.46 9.2-1.48-.21-2.97-.3-4.46-.3zM7.99 2.3c-1.54 2-2.56 5.13-2.71 8.77a33.5 33.5 0 00-3.78.9A10.5 10.5 0 018 2.3zM1.62 13.48c.04-.01.09 0 .13-.03a32 32 0 013.52-.85c.1 3.78 1.14 7.05 2.72 9.1a10.5 10.5 0 01-6.37-8.22zM16 21.7c1.58-2.05 2.62-5.32 2.72-9.1a32 32 0 013.52.85c.04.02.09.02.13.03a10.5 10.5 0 01-6.37 8.22z"),t.appendChild(n)}else if("oldIcon"===e){var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"d","M12 2a10 10 0 1010 10A10 10 0 0012 2zM8.3 4.3a13.1 13.1 0 00-2 7H3.5a8.5 8.5 0 014.8-7zm-4.8 8.5h2.8a13.1 13.1 0 002 7 8.5 8.5 0 01-4.8-7zm7.8 7.5a5.5 5.5 0 01-2.6-3.1l-.4-1.4a14.7 14.7 0 01-.5-3h3.4zm0-9H7.8a15.5 15.5 0 01.5-3L8.7 7a5.6 5.6 0 012.6-3.2zm9.1 0h-2.7a13.1 13.1 0 00-2-7 8.5 8.5 0 014.8 7zm-7.6-7.6A5.5 5.5 0 0115.3 7l.4 1.4a15 15 0 01.5 3h-3.4zm0 16.7v-7.6h3.4a14.9 14.9 0 01-.5 3l-.5 1.4a5.5 5.5 0 01-2.4 3.1zm2.8-.6a13.1 13.1 0 002-7h2.8a8.5 8.5 0 01-4.7 7z"),t.appendChild(a)}return t}("oldIcon"),a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("span");return o.className="uc-lang-sel-clickable",a.className="uc-lang-sel",a.id="uc-lang-sel-wrapper",r.textContent=t,o.appendChild(n),o.appendChild(r),o.addEventListener("click",(function(){e.click()})),a.appendChild(o),a}var f="uc_allophones_disable_banner";function createAllophonesNodeIfNotExists(){var e=document.querySelector(".uc-banner-content"),t=document.querySelector(".z-navicat-header_langNavTools .z-navicat-header_navToolItemLink-empty");t&&e&&!document.querySelector(".".concat("uc-lang-sel"))&&(e.insertAdjacentElement("afterbegin",createUcLangSelector(t)),function updateBodyClassIfNeeded(){document.body.classList.add("is-allophones"),document.body.classList.remove(f)}()),d.parentNode&&d.parentNode.removeChild(d)}function injectAllophonesIfNeeded(){checkIfShouldShow()&&createAllophonesNodeIfNotExists()}var h,g=function(){function BannerStateObserver(){this.observer=void 0,this.callbacks=new Set}return BannerStateObserver.prototype.register=function(e){return this.callbacks.add(e),this},BannerStateObserver.prototype.applyOnChange=function(){var e=this,t=document.getElementById("usercentrics-button");t&&window.MutationObserver&&!this.observer&&this.callbacks.forEach((function(n){try{n(),e.observer=new MutationObserver((function(e){n()})),e.observer.observe(t,{attributes:!1,childList:!0,subtree:!1})}catch(e){}}))},BannerStateObserver}();function loadUserCentrics(e){!function configureUC(e){void 0===window.usercentrics&&(window.usercentrics={}),window.usercentrics.paths={settings:{languages:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/",en:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/en.json",de:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/de.json",cs:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/cs.json",nl:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/nl.json",fr:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/fr.json",es:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/es.json",it:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/it.json",pl:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/pl.json",fi:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/fi.json",da:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/da.json",no:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/no.json",sv:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/sv.json",et:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/et.json",hr:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/hr.json",lt:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/lt.json",lv:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/lv.json",sk:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/sk.json",sl:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/sl.json",hu:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/hu.json",pt:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/pt.json",ro:"https://config.eu.usercentrics.eu/settings/"+e+"/latest/ro.json"},aggregatorPrefix:"https://aggregator.eu.usercentrics.eu/aggregate/",bundle:"https://app.eu.usercentrics.eu/latest/bundle.js",crossDomainConsentSharingIFrame:"https://app.eu.usercentrics.eu/latest/cdcs-iframe-index.html",storeConsents:{apiEndpoint:"https://api.eu.usercentrics.eu/graphql",useRestInsteadOfGraphQL:!1,mode:"cors"}}}(e.ucId),function injectScripts(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=t,n.id=e.ucId,n.language=e.lang;var a=document.getElementsByTagName("script")[0];a.parentNode&&a.parentNode.insertBefore(n,a);try{document.body.className+=" is-uc "+e.customClass}catch(e){r(e)}}(e,"https://app.eu.usercentrics.eu/latest/main.js")}function getCurrentLanguage(e){for(var t=e.hostsPerLang,n=e.defaultLang,a=void 0===n?"de":n,o=window.location.hostname,r=Object.keys(t||{}),s=0;s<r.length;s++){var i=r[s];if(-1!==t[i].indexOf(o))return i}return a}function initialize(e){var t=e.mode,s=e.cookieName,u=e.headerName,l=e.lang,d=e.ucId,w=e.defaultConsentsApp,p=e.customClass,m=void 0===p?"":p,v=e.dataLayer,y=void 0===v?"dataLayer":v;return function render(){o("GTM consent UI loader, v. "+a+" initialising");var e=getTrack(y||"");!function initAllophones(){checkIfShouldShow()&&document.body.classList.add(f)}();var p=function debounce(e,t){var n;return function(){var a=arguments;window.clearTimeout(n),n=window.setTimeout((function(){e.apply(void 0,a),n=void 0}),t)}}((function(){var e;void 0===h&&(h=window.setTimeout((function(){return window.location.reload()}),8634e4));try{if(!window.usercentrics||!window.usercentrics.getConsents)throw new Error("usercentrics not available");e=window.usercentrics.getConsents()}catch(e){return void r(e)}var t=function transformConsentsForBackend(e){return Array.isArray(e)?e.map((function(e){return{consentId:e.consentId,consentStatus:e.consentStatus,dataProcessingService:e.dataProcessor,action:e.action,language:e.language}})):[]}(e);!function updateConsentCache(e){try{var t=(new Date).getTime(),n={cache:e,timestamp:t};window.localStorage.setItem("zConsentCache",JSON.stringify(n)),o("Updated local consent cache at",t)}catch(e){r(e)}}(t),checkIfStale({data:t,onStale:function onStale(){var e=function readLocalRetryInfo(){try{return JSON.parse(window.localStorage.getItem("zConsentRetries")||"{}")||{}}catch(e){return r(e),{}}}(),n=(new Date).getTime();saveConsentToBE({data:t,cookieName:s,headerName:u,retryCount:e.retryCount||0,timeout:n<e.nextAt?e.nextAt-n:0}).catch((function(e){return r("Could not save consent. HTTP Status: "+e.status+", StatusText: "+e.statusText)}))},onUpToDate:function onUpToDate(){return o("Skipping BE save as settings didn't change")}})}),250),v=new g;function handleButton(){(new c).showBannerButton()}function displayBanner(){var e=document.getElementById("usercentrics-button");e&&(e.style.cssText="display:block !important;")}var N=document.querySelectorAll("a[href='#uc-central-modal-show'], a[href='#uc-info-modal-show'], a[href='#uc-banner-show'], a[href='#uc-banner-toggle']");if(N){var b=N.length;if(b>0)for(var C=0;C<b;C++)N[C].addEventListener("click",displayBanner)}if(t===n.LOAD_USERCENTRICS_BANNER){if(window["z-uc-ask-for-banner"]=!0,i({onVisible:function onVisible(){e({event:"uc_layer_1_shown"}),v.register(injectAllophonesIfNeeded).register(handleButton).register(displayBanner).applyOnChange()},shouldStop:function shouldStop(){return!window["z-uc-ask-for-banner"]}}),window.setTimeout((function(){window["z-uc-ask-for-banner"]=!1}),2e4),window.addEventListener("ucEvents",(function(t){void 0===t&&(t={});var n=t.data,a=void 0===n?{event:"",visibility:"",element:"",usc_origin:""}:n;o("UserCentrics ucEvents:",a),"ui_changed"===a.event&&a.visibility&&("secondLayer"===a.element?e({event:"uc_layer_change",consentLayer:"CONSENT_MANAGEMENT_LAYER2"}):"infoLayer"===a.element&&e({event:"uc_layer_change",consentLayer:"CONSENT_MANAGEMENT_LAYER3"}))})),window.addEventListener("ucConsentEvent",(function(e){var t=e.data,n=void 0===t?{event:"",visibility:"",element:"",usc_origin:""}:t;try{o("UserCentrics event:",n.event,e);var a="consents_initialized"===n.event&&"from server setting"===n.usc_origin;("consents_changed_finished"===n.event||a)&&p()}catch(e){r(e)}})),window.usercentrics=window.usercentrics||{},window.usercentrics.isInitialized)onUCReady({lang:l});else{var S=window.usercentrics.onViewInit;window.usercentrics.onViewInit=function(){try{S&&S()}catch(e){}onUCReady({lang:l})}}loadUserCentrics({ucId:d,customClass:m,lang:l})}else{if(t===n.RECEIVE_CONSENT_FROM_APP)return function loadWebViewBridge(e,t){return void 0===t&&(t=[]),getAppConsents("zconsent:get-app-consents").catch((function(e){return r(e),getAppConsents("https://zconsent")})).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)})).then((function(t){o("Received consent data from the app:",t);var n=t.consents;triggerGTMEvents(e,n),publishConsentsForAPI(n)})).catch((function(n){if(window["__webview-consent-external__"]){o("Using external window variable fallback");try{var a=JSON.parse(window["__webview-consent-external__"]).consents;return triggerGTMEvents(e,a),void publishConsentsForAPI(a)}catch(e){r("Error parsing JSON",e)}}throw r(n),o("Using default consents for the app:",t),triggerGTMEvents(e,t),publishConsentsForAPI(t),n}))}(y||"",w);t===n.CONSENT_MANAGEMENT_OFF&&e({event:"consents_initialized",usc_origin:"from server setting"})}}()}function replaceFooterClick(e){try{for(var t=(e=e||window.event).target||e.srcElement;t&&!(t instanceof HTMLAnchorElement);)t=t.parentNode;if(!t)return;-1!==(t.getAttribute("href")||"").indexOf("/data-tracking")&&(e.preventDefault(),t.setAttribute("href","#uc-central-modal-show"))}catch(e){console.error(e)}}var w={de:["www.zalando-lounge.de","www.zalando-lounge.ch","www.zalando-lounge.at"],en:["www.zalando-lounge.co.uk","www.zalando-lounge.com"],pl:["www.zalando-lounge.pl"],nl:["www.zalando-lounge.nl","www.zalando-lounge.be"],it:["www.zalando-prive.it"],fr:["www.zalando-prive.fr","fr.zalando-lounge.ch","fr.zalando-lounge.be"],es:["www.zalando-prive.es"],cs:["www.zalando-lounge.cz"],sv:["www.zalando-lounge.se"],da:["www.zalando-lounge.dk"],fi:["www.zalando-lounge.fi"]},p=function start(){document.addEventListener("click",replaceFooterClick,!0),initialize({mode:n.LOAD_USERCENTRICS_BANNER,cookieName:"frsx",headerName:"x-xsrf-token",lang:getCurrentLanguage({hostsPerLang:w,defaultLang:(document.documentElement.lang||"").split("-")[0].toLowerCase()||"de"}),ucId:"arL_G7jv7",customClass:"is-uc_lounge"})};p(),e.replaceFooterClick=replaceFooterClick,e.start=p,Object.defineProperty(e,"__esModule",{value:!0})}({});
